 # 4회차 테크 인터뷰 스터디

## 정보
- 참여 인원 : 박정수(질문자), 홍성주(답변자)

## 내용

### Q&A 1.  몰입 경험
1.  삶에서 무언가에 몰입했던 경험이 있다면 소개해주세요.
	1. 첫 회사에서 일하면서 개발 공부를 병행했었다. 게시판을 만들어보는 프로젝트를 만들면서 재미를 느꼈고, 개인적인 웹사이트를 가지고 싶다는 생각까지 가지게 되었다. 그래서 점점 전문화된 책과 강의를 접하며 블로그 사이트를 완성할 수 있게 되었다. 퇴근한 후에 시간이 부족했음에도 불구하고 많은 시간을 투자한 경험이었다.
2. 이 경험을 통해서 뭘 얻었다고 생각이 드시나요?
	1. 그 기회를 통해서 무언가에 몰입을 할 수 있는 사람이었다는 것을 새삼 깨달았고, 가슴 뛰는 일을 하고 싶다는 생각에 개발자로 전향을 결심하게 되었다.

### Q&A1. 점수
* 질문자 점수: 4점
* 답변자 점수: 3점

### Q&A1. 피드백
- 질문자 피드백: 
	- 개인적인 사례가 준비되어있다는 것만으로도 좋은 부분이었다고 생각합니다. 
	- 다만 '경험을 통해 얻은 것' 부분이 조금 평이하게 느껴지기도 합니다.
	- 나만의 특별한 깨달음이나 배움이 있었다는 것을 좀 더 강조할 수 있는 내용이면, 자신만의 셀링포인트를 부각하기 좋을 거라고 생각이 됩니다.
- 답변자 피드백: 지금 생각해보니 2번 답변은 어떤 경험을 겪은 사람이든 할 수 있는 답변 같다.

### AS1. 개선 답변
2. 결정적으로 개발자가 되겠다라고 생각한 계기가 되었으며, 이후 공부의 방향성을 잡는데 도움이 되기도 하였다. 

---

### Q&A 2. 서비스 경험
1. 회원의 정보를 업데이트 하는 서비스에 장애가 생겼습니다. 0.05초 이하로 걸리던 API가 5분이 넘게 걸립니다. 회원 정보가 업데이트 되지 않는다는 사용자들의 불만이 빗발치고 있습니다. 어떤 대응 방안들을 고려해 볼 수 있을까요? 해결을 위해 어떤 것부터 확인하고 시도를 해볼것 같으신가요?
	1. 그 문제가 발생하기 직전에 소스코드(깃헙)부터 확인해볼 것 같습니다. 문제되는 변경사항이 있는지부터 확인을 하고, 롤백해야 하는 상황이라면 롤백을 한다.
2. 코드에 문제가 없는 상황이라면?
	1. 서버나 네트웍의 환경을 환경해보겠다. 하드웨어/소프트웨어의 문제인지, 악의적인 공격이 있지는 않았는지 확인을 해보겠다.

### Q&A2. 점수
* 질문자 점수: 3.5점
* 답변자 점수: 3점

### Q&A2. 피드백
- 질문자 피드백: 
	- 마찬가지로 답이 있는 질문이 아니었음에도 순발력있게 답변주셨다고 생각이 듭니다.
	- 단순 기능 구현만 생각해서는 쉽게 고려하기 어려운 보안 부분까지 생각이 미쳤다는 것은 긍정적인 요소로 받아들여졌습니다.
	- 그러나 '실제 사용자를 고려해본 답변들인가' 생각해 보았을 때에는 약간의 아쉬움이 남았습니다.
- 답변자 피드백: 교과서 적인 답변만 한 것 같다.

### AS2. 개선 답변
먼저 문제 상황에 대해 slack나 다른 소통 수단으로 전파를 해야 한다. 이후 에러 로그를 확인하고 해당하는 부분에 대해 어떤 이유로 문제가 생겼는지 원인 파악을 해야 할 것 같다.(DB에 문제가 생겼는지 아니면 네트워크 오류인지 아니면 코드 수정으로 인한 문제인지 아니면 악의적인 공격 등등.....) 이후 각각 문제 원인에 따라 대책을 세울 것 같다. (다른 DB를 사용하거나 롤백을 하거나 hotfix를 하거나....)

(뭔가 전 답변과 다른 것이 별로 없는 것 같다.)

---

### Q&A 3. 
1. 서비스가 외부 API를 사용할 때 생길 수 있는 문제도 있지 않을까요? 외부 API를 사용할 때 주의할 점이 있다면 무엇이 있을까요?
	1. 일단 CORS 문제가 생기지 않도록 해결해두겠다.
	2. 그리고 API 요청 가능 회수를 확인하겠다. 제한이 있다면 기능 사용에 제한이 생길 수 있고, 없다면 DDOS 와 같은 문제를 일으킬 수도 있기 때문에, 고려하겠다.
	3. 적절한 보안 정책을 가지고 있는지 확인하겠다. 중간자 공격이나 스크립트 삽입 공격 등의 기본적인 문제를 방지하도록 하겠다.
2. 위에 답변해 주신 내용들을 실제로 적용해 보신 경험이 있으신가요?
	1.  CORS를 적용해본 경험이 있다. 팀프로젝트를 진행하면서 프론트와 협업 시 문제가 발생해서 해당하는 프로토콜과 포트를 개방해주었다.
3. 아래 내용 참고
	- 질문의 전제 :
		- id, name, value 라는 컬럼을 갖는 테이블입니다.
		- id가 1인 회원의 value를 확인하고
		- 확인된 value가 1이면
		- value를 기존 value에 1을 더한 값으로 update 해주고 싶습니다.
		- 외부저장 서비스의 회원정보에서도 1을 더한 값을 호출합니다. 외부 프로시저를 호출하는 메서드의 시그니처는 `boolean remoteProcedureCall(int value)`입니다. 리턴하는 값은 성공/실패 여부를 나타냅니다.
	- 작업을 실행할 데이터
		- DB에 저장되어있는 데이터 : {1, '김길동', 4}
	- 상황 제시(질문):
		1. 외부저장 서비스는 다운되어 있습니다. 어떻게 할까요?
			1. 답변: 장애 시간 동안의 데이터를 저장하는 다음 임시 저장 공간을 확보해서 저장해두었다가, 복구가 된 이후에 개발 일괄적으로 입력을 하거나, 프로그램을 만들어서 데이터를 옮기겠다.
		2. 외부저장 서비스가 불안합니다. 50%의 경우에만 저장에 성공하고 true를 리턴합니다. 어떻게 할까요?
			1. 답변: 외부 API 요청을 잠깐 멈추고, 먼저 해결했던 방법처럼 따로 저장해두었다가 처리하겠다.
		3. 외부저장 서비스는 healthy합니다. 그러나 우리의 서비스가 불안정하여 업데이트 성공 확률이 50%입니다. 어떻게 할까요?
			1. 답변: 일단 데이터베이스의 장애 시점부터 로그를 확인해서, 문제를 확인하겠다. 문제를 해결하고 로그에 있는 기록들을 보면서, 실패건에 대해 업데이트 해주겠다.
			2. 그게 사용자가 원하는 동작일까요?
				1. 답변: 다시 생각해보니 시스템을 중단하고 사용자에게 공지를 해둘 것 같습니다. 그리고 나서 문제를 해결하겠습니다.
		4. 외부저장 서비스와 우리 서비스 모두 완전하지 않아, 둘 다 99% 확률로만 동작합니다. 어떻게 할까요?
4. ~~웹서버, WAS, DB 모두 처리를 위한 `pool` 개념이 적용되어 있습니다. 풀의 적당한 크기를 정하고 싶습니다. 어떤 것들을 고려할 수 있을까요?~~

### Q&A3. 점수
* 질문자 점수: 3.5점
* 답변자 점수: 2점

### Q&A3. 피드백
- 질문자 피드백: 
	- 실 서비스 운영 경험이 있는지, 없다면 운영 환경에 대해 상상해보고 실제 개발에 녹이려고 고민해보았는지를 확인하려는 의도의 질문이었습니다. 만약 생각해본 적이 없다면, 빠르게 문제를 찾아가는 모습 또는 서비스를 정상화하려는 모습을 보여줄 수 있어도 좋다고 생각합니다.
	- 백엔드의 실제 업무는 개발 뿐만이 아니라 운영하는 것도 포함되기 때문에, 이러한 부분의 대응이 좀 더 되어있다면 좋은 인상을 줄 수 있을 것 같습니다.
	- 다만 문제 요소를 확인하려고 접근하는 논리는 좋았다고 생각이 듭니다. 빠르게 문제를 확인하겠다는 생각은 좋았습니다.
- 답변자 피드백: 문제 상황 발생시 어떻게 해야 하는지 생각을 해본적이 없어서 아쉬운 답변을 한 것 같다. ( + 문제 듣고 멘탈이 와르르 무너진건 덤이다.) 한번정도 이런 생각을 해보는 것이 좋을 것이라는 생각을 하게 되었다.

### AS3. 개선 답변
이것보다 더 좋은 답변이 있겠지만 일단 여러 가능성을 가정하고 답변을 하는게 좋았을 것 같다. 
1. 외부저장 서비스는 다운되어 있습니다. 어떻게 할까요?
    -> 혹시 잠깐 정지해도 되는 서비스인지 확인하고 만약 괜찮다면 외부 api가 복구될 때까지 정지하고 아니라면 외부 DB에 따로 저장한 다음 외부 API가 복구되면 다시 저장을 할 것이다.
2. 외부저장 서비스가 불안합니다. 50%의 경우에만 저장에 성공하고 true를 리턴합니다. 어떻게 할까요?
    -> 외부 서비스의 불안으로 데이터의 정합성이 깨졌으므로 위와 같이 처리를 하고 문제가 생긴 부분에는 롤백을 진행 할 것 같다. 혹은 외부 서비스를 대체할 다른 서비스가 있다면 그것으로 일단 대체를 할 것 같다(예를 들어 로그인에서 Naver, Kakao 로그인 등)
3. 외부저장 서비스는 healthy합니다. 그러나 우리의 서비스가 불안정하여 업데이트 성공 확률이 50%입니다. 어떻게 할까요?
    -> 먼저 데이터베이스가 이분화 되었는지 확인할 것 같다. 만약 되어있다면 오류가 발생하지 않은 다른 데이터베이스와 연결을 할 것이다. 그렇지 않다면 해당 서비스를 정지 한 다음 어떤 문제가 발생했는지 확인하고 hotfix를 하건 롤백을 하건 둘 중 하나를 선택해서 진행할 것 같다.
4. 외부저장 서비스와 우리 서비스 모두 완전하지 않아, 둘 다 99% 확률로만 동작합니다. 어떻게 할까요?

---

### Q&A 4. 개발 철학
1. 좋은 코드란 무엇일까요? 좋은 코드나 리팩토링에 관해 관심이 있는 부분에 대해 자유롭게 이야기해주세요.
	1. 가독성이 뛰어나고 유지보수가 용이하고 테스트 가능한 코드입니다. 그 중에서 적용해본 것은 가독성을 높이기 위한 시도로, 유의미한 함수명과 메서드명, 인덴테이션 규칙 등의 컨벤션을 적용한 것입니다.
	2. 테스트를 용이하게 하기 위해서 레이어드 아키텍처를 잘 따르도록, 그리고 하나의 클래스가 하나의 책임을 주도록 설계를 했습니다.
2. 리팩토링 경험은 혹시 있으신가요?
	1. 답변: 스스로 코드리뷰를 하며 경험했습니다. 코드 가독성이 떨어지는 부분부터 리팩토링을 해보았습니다. 네이밍에 신경을 썼다. 그리고 DTO를 적극 활용해서 각 계층의 역할을 명확하게 구분하려고 했다.
	2. 각 계층의 역할을 어떻게 생각하시나요? 그래서 어떤 코드를 어떻게 변경하셨나요?
		1. 답변: 컨트롤러는 요청을 받아 적절한 처리기로 분배한다. 서비스는 비즈니스 로직과 연관된다. 기존에는 컨트롤러에 서비스 로직 있었는데 서비스로 옮겼다. 컨트롤러에 기존에 엔티티로 사용했었는데, 엔티티를 컨트롤러에서 사용하는게 위험하다고 생각해서 DTO로 넘기도록 했다. 


### Q&A4. 점수
* 질문자 점수: 3점
* 답변자 점수: 2.5점

### Q&A4. 피드백
- 질문자 피드백: 
	- 답변하신 내용들은 다 잘 답변해주셨다고 생각이 들지만, 준비하신 답변이 질문의 의도와는 잘 맞지 않을 수 있겠다는 생각이 들었습니다.
	- 리팩토링 경험에 대해 이야기 할 때, 앞서 본인이 설명해주신 리팩토링 기술들과 부합하지 않는 내용들이 있어 약간의 혼란이 있었습니다. 
	- 직접 경험하신 내용이 구체적으로 어떤 리팩토링 기법들인지 생각해보고 사례를 준비하시면 더욱 좋은 답변이 만들어질 것 같습니다.
- 답변자 피드백: 

### AS4. 개선 답변

가독성이 뛰어나고 유지보수가 용이한 코드입니다. 그 중에서 적용해 본 것은 가독성을 높이기 위해 유의미한 변수명, 함수명을 사용하고, 인덴트 2 이하로 줄이기, 하나의 클래스에 하나의 책임만 부여함으로써 가독성과 추후 유지보수에도 도움이 되도록 하였다.

스스로 코드 리뷰를 해보고 가독성 부분에서 아쉬움이 많다는 것을 느꼈다. 그래서 리팩토링을 진행하였다. 앞에 말씀 드린 내용들을 적용해보았으며 컨트롤러에 비즈니스 로직이 들어가 있는 부분에 대해서 서비스 레이어로 옮기는 방법으로 리팩토링을 진행시켰다.

